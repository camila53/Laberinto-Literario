function agregarProducto(t){var a=t.target.parentElement,o=a.getAttribute("nombre-libro"),e=a.querySelector(".precio span").textContent,r=document.createElement("tr");r.innerHTML=` \n  <td>${o}</td>\n  <td>${e}</td>\n  <td><a href="#" class="borrar_producto"><i class="fa-sharp fa-solid fa-circle-xmark"></i></a></td>\n  `;var n=document.getElementById("lista-productos");n.appendChild(r);var c=r.querySelector(".borrar_producto");c.onclick=(()=>{r.remove(),restarContador(),restarTotal(e),actualizarTotalPedido()}),sumarContador(),sumarTotal(e),compra_btn.disabled=!1,actualizarTotalPedido()}function sumarTotal(t){t=parseFloat(t.replace("$","")),total+=t,actualizarTotal(),actualizarTotalPedido()}function restarTotal(t){t=parseFloat(t.replace("$","")),total-=t,actualizarTotal(),actualizarTotalPedido()}function actualizarTotal(){total_carrito.textContent="Precio Total: $"+total.toFixed(3);var t=document.getElementById("total-compra");t.textContent="Precio Total: $"+total.toFixed(3)}function actualizarTotalPedido(){const t=document.querySelector("form");t.addEventListener("submit",function(t){t.preventDefault(),totalTarifa.style.display="block",totalPedido.style.display="block",pagar_btn.style.display="block";const a=document.querySelector("input[name='ciudad']"),o=parseFloat(document.getElementById("total-compra").textContent.replace("Precio Total: $",""));var e;e=total>=150&&"cali"===a.value.toLowerCase()?0:total<=150&&"cali"===a.value.toLowerCase()?10:15,totalTarifa.textContent="Valor domicilio: $"+e.toFixed(3);var r=o+e,n=document.getElementById("total-pedido");n.textContent="Total a Pagar: $"+r.toFixed(3)})}function sumarContador(){contar++,actualizarContador()}function restarContador(){contar--,actualizarContador()}function actualizarContador(){contador.textContent=contar}function actualizarCarrito(){const t=document.getElementById("lista-productos");t.innerHTML="<td>Nombre</td> <td>Precio</td> <td></td>",carrito.forEach(t=>{const a=document.createElement("tr");a.innerText=` \n    <td>${t.nombre}</td>\n    <td>${t.precio}</td> \n    <td><a href="#" class=" borrar_producto" ><i class="fa-sharp fa-solid fa-circle-xmark"></i></a></td>\n    `})}function vaciarCarrito(){carrito=[],contar=0,total=0,actualizarTotal(),actualizarCarrito(),actualizarContador(),actualizarTotalPedido(),compra_btn.disabled=!0}const icon=document.getElementById("carrito_"),icon_cerrar=document.getElementById("cerrar_carrito");var container_productos=document.getElementById("carrito");const contador=document.querySelector(".contador_producto"),car=document.querySelector(".car");var total_carrito=document.getElementById("total");car.onclick=(()=>{icon.style.display="none",contador.style.display="none",icon_cerrar.style.display="block",container_productos.style.display="block"}),icon_cerrar.onclick=(()=>{icon.style.display="block",contador.style.display="block",icon_cerrar.style.display="none",container_productos.style.display="none"});var botones=document.querySelectorAll("#carrito_btn"),contar=0,total=0;botones.forEach(function(t){t.addEventListener("click",agregarProducto)});const totalTarifa=document.getElementById("tarifa"),totalPedido=document.getElementById("total-pedido"),pagar_btn=document.getElementById("pagar"),vaciarCarritoBtn=document.getElementById("vaciar");vaciarCarritoBtn.addEventListener("click",vaciarCarrito);const info_compra=document.querySelector(".info_compra"),compra_btn=document.getElementById("comprar"),cerrar=document.getElementById("cerrar_compra"),cancelar=document.getElementById("cancelar_pedido");compra_btn.onclick=(()=>{if(0===contar)return alert("El carrito se encuentra vacío, por favor realice una compra");info_compra.style.display="flex"}),cerrar.onclick=(()=>{info_compra.style.display="none",totalTarifa.style.display="none",totalPedido.style.display="none",pagar_btn.style.display="none"}),cancelar.onclick=(()=>{info_compra.style.display="none",totalTarifa.style.display="none",totalPedido.style.display="none",pagar_btn.style.display="none"}),pagar_btn.addEventListener("click",function(){alert("¡Gracias por tu compra!"),location.reload()});